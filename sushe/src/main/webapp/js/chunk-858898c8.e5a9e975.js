(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-858898c8","chunk-2d21b2be"],{bf48:function(e,t,s){"use strict";s.r(t),s.d(t,"MyFilters",(function(){return a})),s.d(t,"ModalDialogUtils",(function(){return r})),s.d(t,"VueUtil",(function(){return i})),Date.prototype.format=function(e){let t={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(let s in t)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[s]:("00"+t[s]).substr((""+t[s]).length)));return e};const a={filters:{formatDate:function(e,t="yyyy-MM-dd"){return"string"!=typeof e?e:new Date(e).format(t)}}},r={data(){return{dlgParam:{},dlgTitle:"",dlgVisible:!1}},components:{},props:{param:{type:Object}},methods:{showDlg(e,t,s){"string"==typeof t?null!=this.$refs[t]?this.$refs[t].show(e,s):this.$message.error("没找到窗体"):this.$message.error("对话框参数异常")}}};let i=function(e){this.http=e.$http,this.alert=e.$alert,this.confirm=e.$confirm,this.message=e.$message,this.isDuringDate=function(e,t){let s=new Date,a=new Date(e),r=new Date(t);return s>=a&&s<=r},this.isPasted=function(e,t){let s=new Date,a=(new Date(e),new Date(t));return s>a}}},dba8:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"panel panel-default"},[t("div",{staticClass:"panel-heading"},["save"==e.actiontype?t("span",[e._v("新增用户")]):e._e(),"update"==e.actiontype?t("span",[e._v("编辑用户")]):e._e()]),t("div",{staticClass:"panel-body"},[t("table",{staticClass:"smart-table",attrs:{border:"1",cellspacing:"1",width:"100%"}},[t("tr",[t("td",{staticClass:"tlabel",attrs:{width:"10%",align:"right"}},[e._v("用户名:")]),t("td",{attrs:{width:"*"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.users.username,expression:"users.username"},{name:"validate",rawName:"v-validate",value:{required:!0,messages:{required:"请输入用户名"}},expression:"{required:true,messages:{required:'请输入用户名'}}"}],staticClass:"input-txt",attrs:{name:"username",placeholder:"用户名",type:"text"},domProps:{value:e.users.username},on:{input:function(t){t.target.composing||e.$set(e.users,"username",t.target.value)}}})]),t("td",{attrs:{colspan:"2",rowspan:"6"}},[t("dw-upload",{attrs:{"host-head":e.hostHead},model:{value:e.users.xiangpian,callback:function(t){e.$set(e.users,"xiangpian",t)},expression:"users.xiangpian"}})],1)]),t("tr",[t("td",{staticClass:"tlabel",attrs:{width:"10%",align:"right"}},[e._v("密码:")]),t("td",{attrs:{width:"*"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.users.password,expression:"users.password"},{name:"validate",rawName:"v-validate",value:{required:!0,messages:{required:"请输入密码"}},expression:"{required:true,messages:{required:'请输入密码'}}"}],staticClass:"input-txt",attrs:{name:"password",placeholder:"密码",type:"password"},domProps:{value:e.users.password},on:{input:function(t){t.target.composing||e.$set(e.users,"password",t.target.value)}}})])]),t("tr",[t("td",{staticClass:"tlabel",attrs:{align:"right"}},[e._v("角色:")]),t("td",[t("el-select",{model:{value:e.users.roleid,callback:function(t){e.$set(e.users,"roleid",t)},expression:"users.roleid"}},e._l(e.listRole,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1)]),t("tr",[t("td",{staticClass:"tlabel",attrs:{width:"10%",align:"right"}},[e._v("姓名:")]),t("td",{attrs:{width:"*"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.users.realname,expression:"users.realname"},{name:"validate",rawName:"v-validate",value:{required:!0,messages:{required:"请输入姓名"}},expression:"{required:true,messages:{required:'请输入姓名'}}"}],staticClass:"input-txt",attrs:{name:"realname",placeholder:"姓名",type:"text"},domProps:{value:e.users.realname},on:{input:function(t){t.target.composing||e.$set(e.users,"realname",t.target.value)}}})])]),t("tr",[t("td",{staticClass:"tlabel",attrs:{align:"right"}},[e._v("性别:")]),t("td",{attrs:{width:"*"}},[t("el-radio-group",{model:{value:e.users.sex,callback:function(t){e.$set(e.users,"sex",t)},expression:"users.sex"}},[t("el-radio",{attrs:{label:"男"}}),t("el-radio",{attrs:{label:"女"}})],1)],1)]),t("tr",[t("td",{staticClass:"tlabel",attrs:{align:"right"}},[e._v("电话:")]),t("td",{attrs:{width:"*"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.users.tel,expression:"users.tel"},{name:"validate",rawName:"v-validate",value:{required:!0,messages:{required:"请输入电话"}},expression:"{required:true,messages:{required:'请输入电话'}}"}],staticClass:"input-txt",attrs:{name:"tel",placeholder:"电话",type:"text"},domProps:{value:e.users.tel},on:{input:function(t){t.target.composing||e.$set(e.users,"tel",t.target.value)}}})])]),t("tr",[t("td",{staticClass:"tlabel",attrs:{align:"right"}},[e._v("昵称:")]),t("td",{attrs:{width:"*"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.users.nickname,expression:"users.nickname"},{name:"validate",rawName:"v-validate",value:{required:!0,messages:{required:"请输入昵称"}},expression:"{required:true,messages:{required:'请输入昵称'}}"}],staticClass:"input-txt",attrs:{name:"nickname",placeholder:"昵称",type:"text"},domProps:{value:e.users.nickname},on:{input:function(t){t.target.composing||e.$set(e.users,"nickname",t.target.value)}}})]),t("td",{staticClass:"tlabel",attrs:{align:"right"}},[e._v("邮箱:")]),t("td",{attrs:{width:"*"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.users.email,expression:"users.email"},{name:"validate",rawName:"v-validate",value:{required:!0,messages:{required:"请输入邮箱"}},expression:"{required:true,messages:{required:'请输入邮箱'}}"}],staticClass:"input-txt",attrs:{name:"email",placeholder:"邮箱",type:"text"},domProps:{value:e.users.email},on:{input:function(t){t.target.composing||e.$set(e.users,"email",t.target.value)}}})])]),t("tr",[t("td",{attrs:{colspan:"4"}},[t("el-button",{attrs:{icon:"el-icon-check",type:"danger"},on:{click:e.submitHandler}},[e._v("提交")])],1)])])])])])},r=[],i=s("bf48"),l={name:"usersadd",data(){return{dangerinput:!1,pageTitle:"新增学生信息",errors:{},listRole:[],hostHead:this.$app.contextPath,actiontype:"save",users:{username:"",password:"",sex:"男",tel:"",roleid:1,realname:"",nickname:"",email:"",creator:this.accountInfo.username,xiangpian:"/upload/nopic.jpg"}}},created(){this.load(),this.getRoles()},props:{accountInfo:{type:Object}},methods:{uploaded(e,t){console.log("上传成功",e.data),null!=e.data&&e.data.length>0&&(this.users.xiangpian=e.data[0].relativeUrl)},async getRoles(){let e="admin/sysrole/list",t={ispaged:"-1"},s=new i["VueUtil"](this),{data:a}=await s.http.post(e,t);console.log("sysrolecontroller返回",a),this.listRole=a.data,null!=this.listRole&&this.listRole.length>0&&(this.users.roleid=this.listRole[0].id)},submitHandler(){"save"===this.actiontype&&this.doSubmit({url:"/admin/users/save",actionTip:"新增学生成功"}),"update"===this.actiontype&&this.doSubmit({url:"/admin/users/update",actionTip:"更新学生成功"})},async doSubmit(e){let t={url:"/admin/users/add",actionTip:"新增学生成功"};Object.assign(t,e);let s={...this.users};console.log("params=",s);const a=this.myValidator.valid(this);if(!a)return;let{data:r}=await this.$http.post(t.url,s);console.log("服务端返回",r),r.stateCode<=0?this.$alert(r.des,"系统提示",{confirmButtonText:"确定"}):(this.$message({message:t.actionTip,type:"success",duration:3e3}),this.$router.push("/admin/usersmanager"))},preupload(e){const t="image/jpeg"===e.type,s=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&s},async load(){let e=this.$route.query.id;if(null!=e){this.actiontype="update",this.pageTitle="编辑学生信息";let t="/admin/users/load",{data:s}=await this.$http.post(t,{id:e});console.log("res",s),null!=s&&null!=s.data&&(this.users=s.data)}}}},n=l,o=s("2877"),u=Object(o["a"])(n,a,r,!1,null,"1571c507",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-858898c8.e5a9e975.js.map