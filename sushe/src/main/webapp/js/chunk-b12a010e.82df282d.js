(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b12a010e","chunk-2d21b2be"],{a6be:function(t,i,s){"use strict";s.r(i);var a=function(){var t=this,i=t._self._c;return i("div",[t.over?i("div",{staticClass:"wrap round-block"},[i("div",{staticClass:"no-record-tip"},[i("div",{staticClass:"content"},[i("i",{staticClass:"el-icon-check"}),t._v("下单成功"),i("router-link",{attrs:{to:"/huiyuan/appointordermanager"}},[t._v("我的订单")])],1)])]):i("div",{staticClass:"wrap round-block"},[i("div",{staticClass:"line-title"},[t._v(" 当前位置："),i("router-link",{attrs:{to:"/e/index"}},[t._v("首页")]),t._v(" >> 商品信息>>"+t._s(t.shangpin.name)+" ")],1),i("div",{staticClass:"fn-clear"}),i("div",{staticClass:"shangpin-info clearfix"},[i("div",{staticClass:"pic-area"},[i("div",{staticClass:"big-img"},[i("img",{attrs:{src:t.hostHead+t.shangpin.tupian}})])]),i("div",{staticClass:"props"},[i("div",{staticClass:"title"},[t._v(" "+t._s(t.shangpin.name)+" ")]),i("div",{staticClass:"subtitle"}),i("div",{staticClass:"price-block clearfix"},[i("div",{staticClass:"mall-price clearfix"},[i("div",{staticClass:"label"},[t._v("价格")]),i("div",{staticClass:"price"},[t._v(" ¥ "+t._s(t.shangpin.price))])])]),i("div",{staticClass:"prop",staticStyle:{"margin-top":"20px"}},[i("dl",{staticClass:"clearfix"},[i("dt",[t._v("品牌")]),i("dd",[t._v(t._s(t.shangpin.pinpai))])])]),i("div",{staticClass:"prop"},[i("el-button-group",[i("el-button",{attrs:{type:"primary"},on:{click:t.shoucangHandler}},[i("i",{staticClass:"fa fa-star"}),t._v("收藏")]),t.shangpin.kucun>0?i("el-button",{attrs:{type:"danger"},on:{click:t.showAppointdlg}},[i("i",{staticClass:"fa fa-plus"}),t._v("我要下单 ")]):t._e()],1)],1)])]),i("el-tabs",{attrs:{value:"first"}},[i("el-tab-pane",{attrs:{label:"商品介绍",name:"first"}},[i("div",{staticClass:"brief-content",domProps:{innerHTML:t._s(t.shangpin.des)}})])],1),i("loginmodal",{attrs:{show:t.openLogin},on:{"update:show":function(i){t.openLogin=i}}}),i("el-dialog",{attrs:{title:"商品预定",visible:t.appointdlg},on:{"update:visible":function(i){t.appointdlg=i}}},[i("table",{staticClass:"smart-table",attrs:{width:"100%",border:"1"}},[i("tr",[i("td",{staticClass:"tlabel"},[t._v("名称")]),i("td",[t._v(" "+t._s(t.shangpin.name)+" ")])]),i("tr",[i("td",{staticClass:"tlabel"},[t._v("金额(元)")]),i("td",[t._v(" "+t._s(t.shangpin.price)+"¥ ")])]),null!=t.huiyuan?[i("tr",[i("td",{staticClass:"tlabel"},[t._v("姓名")]),i("td",[t._v(t._s(t.huiyuan.name))])]),i("tr",[i("td",{staticClass:"tlabel"},[t._v("身份证号")]),i("td",[t._v(t._s(t.huiyuan.idcardno))])]),i("tr",[i("td",{staticClass:"tlabel"},[t._v("电话")]),i("td",[t._v(t._s(t.huiyuan.tel))])])]:t._e(),i("tr",[i("td",{staticClass:"tlabel",attrs:{width:"20%"}},[t._v("数量")]),i("td",[i("el-input-number",{attrs:{min:1,max:10,label:"数量"},model:{value:t.appointorder.count,callback:function(i){t.$set(t.appointorder,"count",i)},expression:"appointorder.count"}})],1)]),i("tr",[i("td",{staticClass:"tlabel"},[t._v("说明")]),i("td",[i("el-input",{attrs:{type:"textarea"},model:{value:t.appointorder.des,callback:function(i){t.$set(t.appointorder,"des",i)},expression:"appointorder.des"}})],1)])],2),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitHandler}},[t._v("确 定")]),i("el-button",{on:{click:function(i){t.appointdlg=!1}}},[t._v("取 消")])],1)])],1)])},e=[],n=s("bf48"),o={name:"shangpininfo",data(){return{listComment:[],bigPic:"",count:1,hostHead:this.$app.contextPath,listRecomment:[],selectedIndex:0,shangpin:{},openLogin:!1,appointdlg:!1,idcardno:"",over:!1,appointorder:{yydate:(new Date).format("yyyy-MM-dd"),mobile:"",hyid:"",fee:10,count:1,danjia:100,targetid:1}}},created(){let t=this.$route.query.id;this.getShangpin(t)},methods:{async getComment(t){let i="admin/spcomment/list",{data:s}=await this.$http.post(i,{spid:t,ispaged:"-1"});console.log(s)},isLogin(){return this.$app.mycas.isLogin(this.$app.mycas.huiyuan_key)},select(t,i){this.bigPic=t,this.selectedIndex=i},async getShangpin(t){let i="admin/shangpin/info",s={id:t};""!=this.hyid&&(s.hyid=this.hyid);let{data:a}=await this.$http.post(i,s);this.shangpin=a.data,this.bigPic=this.shangpin.images[0]},async shoucangHandler(){let t="admin/shoucang/save";console.log("shanppin.id=",this.shangpin.id);let{data:i}=await this.$http.post(t,{targetid:this.shangpin.id,targetname:this.shangpin.name,tupian:this.shangpin.tupian,hyid:this.huiyuan.id,xtype:"shangpin",href:"/huiyuan/shangpininfo?id="+this.shangpin.id});null!=i&&i.stateCode<0?this.$message.error(i.des):this.$message.success("收藏成功")},async showAppointdlg(){null!=this.huiyuan?(this.appointdlg=!0,this.appointorder.targetid=this.shangpin.id,this.appointorder.hyid=this.huiyuan.id,this.appointorder.mobile=this.huiyuan.tel,this.appointorder.danjia=this.shangpin.price,this.appointorder.fee=this.appointorder.count*this.appointorder.danjia):this.openLogin=!0},async submitHandler(){if(""==this.huiyuan)return void this.$message.error("登录后再预定");if(""==this.huiyuan.idcardno)return void this.$message.error("请完善个人信息报名");let t=new n["VueUtil"](this);this.appointorder.fee=this.appointorder.count*this.appointorder.danjia;let i={...this.appointorder},{data:s}=await t.http.post("admin/appointorder/save",i);s.stateCode<=0?t.alert(s.des,"系统提示",{confirmButtonText:"确定"}):(t.message({message:"成功",type:"success",duration:2e3}),this.appointdlg=!1,this.over=!0)}},computed:{huiyuan(){return this.$app.mycas.getAccount(this.$app.mycas.huiyuan_key)}}},r=o,l=s("2877"),p=Object(l["a"])(r,a,e,!1,null,"77fa62ca",null);i["default"]=p.exports},bf48:function(t,i,s){"use strict";s.r(i),s.d(i,"MyFilters",(function(){return a})),s.d(i,"ModalDialogUtils",(function(){return e})),s.d(i,"VueUtil",(function(){return n})),Date.prototype.format=function(t){let i={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(let s in i)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[s]:("00"+i[s]).substr((""+i[s]).length)));return t};const a={filters:{formatDate:function(t,i="yyyy-MM-dd"){return"string"!=typeof t?t:new Date(t).format(i)}}},e={data(){return{dlgParam:{},dlgTitle:"",dlgVisible:!1}},components:{},props:{param:{type:Object}},methods:{showDlg(t,i,s){"string"==typeof i?null!=this.$refs[i]?this.$refs[i].show(t,s):this.$message.error("没找到窗体"):this.$message.error("对话框参数异常")}}};let n=function(t){this.http=t.$http,this.alert=t.$alert,this.confirm=t.$confirm,this.message=t.$message,this.isDuringDate=function(t,i){let s=new Date,a=new Date(t),e=new Date(i);return s>=a&&s<=e},this.isPasted=function(t,i){let s=new Date,a=(new Date(t),new Date(i));return s>a}}}}]);
//# sourceMappingURL=chunk-b12a010e.82df282d.js.map